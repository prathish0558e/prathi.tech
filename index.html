<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Prathi Tech — Free Tools Hub</title>
<meta name="description" content="Prathi Tech — curated free tools & student packs. Search, filter and request tools." />
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<!-- Feather icons -->
<script src="https://unpkg.com/feather-icons"></script>

<style>
  /* ----------------- THEME & RESET ----------------- */
  :root{
    --bg:#071224; --card:#0e1722; --muted:#98afc7; --text:#eaf4ff;
    --accent1:#7b61ff; --accent2:#00e6a8; --glass:rgba(255,255,255,0.03);
    --maxw:1180px; --radius:14px; --shadow:0 12px 40px rgba(0,0,0,0.45);
  }
  [data-theme="light"]{
    --bg:#f6fbff; --card:#ffffff; --muted:#4b5563; --text:#071223;
    --accent1:#5530d6; --accent2:#119688; --glass:rgba(0,0,0,0.04);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text);background:var(--bg);-webkit-font-smoothing:antialiased}
  a{color:inherit;text-decoration:none}
  button{font-family:inherit}
  /* ----------------- LAYOUT ----------------- */
  .wrap{max-width:var(--maxw);margin:92px auto 88px;padding:18px}
  /* ----------------- NAVBAR ----------------- */
  .navbar{position:fixed;left:12px;right:12px;top:12px;z-index:120;padding:10px 14px;display:flex;align-items:center;justify-content:space-between;gap:12px;background:linear-gradient(180deg,var(--glass),rgba(255,255,255,0));border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow)}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center}
  .logo svg{width:20px;height:20px;opacity:.98}
  .site-title{font-weight:800;line-height:1}
  .site-sub{font-size:12px;color:var(--muted)}
  .menu-desktop{display:none}
  .nav-actions{display:flex;gap:8px;align-items:center}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:var(--text);font-weight:700;display:inline-flex;align-items:center;gap:8px;cursor:pointer;transition:transform .12s,background .12s}
  .btn-ghost:hover{transform:translateY(-2px);background:var(--glass)}
  .theme-btn{padding:8px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041017;font-weight:800;display:inline-flex;align-items:center;gap:8px;cursor:pointer}
  .hamburger{width:46px;height:46px;border-radius:10px;background:rgba(255,255,255,0.02);display:grid;place-items:center;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
  /* ----------------- MOBILE MENU ----------------- */
  .mobile-menu{position:fixed;left:12px;right:12px;top:76px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);backdrop-filter:blur(8px);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 40px rgba(0,0,0,0.6);display:none;z-index:119}
  .mobile-menu a{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;font-weight:800;color:var(--muted)}
  .mobile-menu a.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041017}
  /* ----------------- HERO ----------------- */
  .hero{display:grid;grid-template-columns:1fr;gap:18px;align-items:center;padding:18px 0}
  .hero-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:var(--radius); padding:18px; border:1px solid rgba(255,255,255,0.04); box-shadow:var(--shadow)}
  h1{margin:0;font-size:clamp(22px,6vw,34px);display:flex;align-items:center;gap:10px}
  .lead{margin-top:10px;color:var(--muted);font-size:15px}
  .cta{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:800}
  .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041017;box-shadow:0 10px 30px rgba(123,97,255,0.06)}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04)}
  /* ----------------- SECTIONS ----------------- */
  section{margin-top:30px}
  .section-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .section-head h2{margin:0;font-size:18px;display:flex;align-items:center;gap:8px}
  .muted{color:var(--muted)}
  /* toolbar / search */
  .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:12px}
  .input{padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);min-width:150px;flex:1;max-width:760px}
  .select{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}
  .tags{display:flex;gap:8px;flex-wrap:wrap}
  .tag{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:700;cursor:pointer}
  .tag.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041017}
  /* grid */
  .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:14px}
  .card{background:var(--card);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;transition:transform .18s,box-shadow .18s}
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 48px rgba(0,0,0,0.55)}
  .card h3{margin:0;font-size:15px}
  .card p{margin:0;color:var(--muted);font-size:13px}
  .card .meta{display:flex;gap:8px;flex-wrap:wrap}
  .card .actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
  .card .open{padding:8px 12px;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041017;font-weight:800}
  .card .more{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04)}
  .pager{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .pager button{padding:8px 10px;border-radius:8px;border:0;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:800}
  .pager button.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041017}
  /* contact form */
  .form{max-width:760px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.04)}
  .form .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .form input,.form textarea{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}
  .form button{padding:10px 14px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));font-weight:800;color:#041017;cursor:pointer}
  /* footer */
  .footer{margin-top:26px;text-align:center;color:var(--muted);font-size:13px;padding-bottom:40px}
  /* reveal helper */
  .reveal{opacity:0;transform:translateY(10px);transition:all .6s cubic-bezier(.2,.9,.3,1)}
  .reveal.show{opacity:1;transform:none}
  /* canvas background */
  #bg{position:fixed;inset:0;z-index:-1}
  /* responsive */
  @media(min-width:720px){ .hero{grid-template-columns:1fr 360px} .grid{grid-template-columns:repeat(2,1fr)} .menu-desktop{display:flex} .menu-mobile-toggle{display:none} }
  @media(min-width:1024px){ .grid{grid-template-columns:repeat(3,1fr)} .wrap{padding:24px} }
</style>
</head>
<body data-theme="dark" aria-busy="false">

<canvas id="bg" aria-hidden="true"></canvas>

<!-- NAV -->
<header class="navbar" role="banner" aria-label="Main navigation">
  <div class="brand" aria-hidden="false">
    <div class="logo" aria-hidden="true" title="Prathi Tech">
      <!-- simple icon -->
      <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.6" width="20" height="20" aria-hidden="true">
        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
      </svg>
    </div>
    <div>
      <div class="site-title">Prathi Tech</div>
      <div class="site-sub">Free tools & resources for students</div>
    </div>
  </div>

  <nav class="menu-desktop" aria-hidden="true">
    <button class="btn-ghost" data-route="home"><i data-feather="home"></i>&nbsp;Home</button>
    <button class="btn-ghost" data-route="tools"><i data-feather="tool"></i>&nbsp;Tools</button>
    <button class="btn-ghost" data-route="packs"><i data-feather="gift"></i>&nbsp;Packs</button>
    <button class="btn-ghost" data-route="learning"><i data-feather="book-open"></i>&nbsp;Learning</button>
    <button class="btn-ghost" data-route="contact"><i data-feather="mail"></i>&nbsp;Contact</button>
  </nav>

  <div class="nav-actions">
    <button id="themeToggle" class="theme-btn" aria-label="Toggle theme"><i data-feather="moon"></i></button>
    <button id="menuToggle" class="hamburger menu-mobile-toggle" aria-label="Open menu"><i data-feather="menu"></i></button>
  </div>
</header>

<!-- mobile menu -->
<nav id="mobileMenu" class="mobile-menu" role="menu" aria-hidden="true" style="display:none">
  <a href="#" data-route="home"><i data-feather="home"></i> Home</a>
  <a href="#" data-route="tools"><i data-feather="tool"></i> Tools</a>
  <a href="#" data-route="packs"><i data-feather="gift"></i> Packs</a>
  <a href="#" data-route="learning"><i data-feather="book-open"></i> Learning</a>
  <a href="#" data-route="contact"><i data-feather="mail"></i> Contact</a>
</nav>

<main class="wrap" id="app">

  <!-- HOME -->
  <section id="home" class="reveal show" aria-labelledby="homeHeading">
    <div class="hero">
      <div>
        <h1 id="homeHeading"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 2l3 7h7l-6 5 2 8-8-5-8 5 2-8L2 9h7z"></path></svg> Prathi Tech — Free tools & resources for students</h1>
        <p class="lead">Curated, verified and student-friendly free tools — search, filter and request new tools. Built mobile-first with performance in mind.</p>

        <div class="cta" style="margin-top:14px">
          <button class="btn primary" data-go="tools"><i data-feather="compass"></i> Explore Tools</button>
          <button class="btn" data-go="packs"><i data-feather="gift"></i> Claim Packs</button>
        </div>

        <div style="margin-top:12px;color:var(--muted);display:flex;gap:10px;align-items:center;"><i data-feather="info"></i> Tip: Press <strong>/</strong> to focus search — Press <strong>H</strong> for help.</div>
      </div>

      <aside class="hero-card" aria-label="Top picks">
        <h3 style="margin:0 0 10px"><i data-feather="thumbs-up"></i> Top picks</h3>
        <ul style="padding-left:18px;margin:0;color:var(--muted);font-size:14px;list-style:none">
          <li style="display:flex;align-items:center;gap:8px"><i data-feather="github"></i> GitHub Student Pack — domains & tools</li>
          <li style="display:flex;align-items:center;gap:8px"><i data-feather="cpu"></i> Google Colab — free GPUs</li>
          <li style="display:flex;align-items:center;gap:8px"><i data-feather="image"></i> Photopea — browser image editor</li>
        </ul>
      </aside>
    </div>
  </section>

  <!-- TOOLS -->
  <section id="tools" class="reveal" style="display:none" aria-labelledby="toolsHeading">
    <div class="section-head">
      <h2 id="toolsHeading"><i data-feather="tool"></i> Free Tools & Resources</h2>
      <div class="muted">Safe, legal & student-friendly — { <span id="itemsCount">0</span> tools loaded }</div>
    </div>

    <div class="toolbar" style="margin-top:12px">
      <input id="search" class="input" placeholder="Search tools (hosting, editor, ai, design) — press / to focus">
      <select id="cat" class="select" aria-label="Category">
        <option value="all">All categories</option>
        <option value="dev">Developer</option>
        <option value="design">Design</option>
        <option value="media">Media</option>
        <option value="ml">ML/AI</option>
        <option value="cloud">Cloud</option>
        <option value="students">Students</option>
        <option value="security">Security</option>
      </select>
      <div class="tags" id="tagWrap" aria-hidden="false"></div>
    </div>

    <div id="cards" class="grid" style="margin-top:12px" aria-live="polite"></div>
    <div id="pager" class="pager" role="navigation" aria-label="Pagination"></div>
  </section>

  <!-- PACKS -->
  <section id="packs" class="reveal" style="display:none">
    <div class="section-head">
      <h2><i data-feather="gift"></i> Student Packs & Offers</h2>
      <div class="muted">Claim with your student email</div>
    </div>
    <div id="packsGrid" class="grid" style="margin-top:12px"></div>
  </section>

  <!-- LEARNING -->
  <section id="learning" class="reveal" style="display:none">
    <div class="section-head">
      <h2><i data-feather="book-open"></i> Learning Resources</h2>
      <div class="muted">Courses, docs & free materials</div>
    </div>
    <div id="learnGrid" class="grid" style="margin-top:12px"></div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="reveal" style="display:none">
    <div class="section-head">
      <h2><i data-feather="mail"></i> Request a tool</h2>
      <div class="muted">Tell us which free tool/resource you want added</div>
    </div>

    <form id="contactForm" class="form" aria-label="Request form" style="margin-top:12px">
      <div class="row">
        <input name="name" class="input" placeholder="Your name" required>
        <input name="email" class="input" placeholder="Email (optional)">
      </div>
      <div style="margin-top:10px">
        <input name="tool" class="input" placeholder="Tool name (e.g. Photopea / Overleaf)" required>
      </div>
      <div style="margin-top:10px">
        <textarea name="message" rows="4" class="input" placeholder="Why this tool? (short)"></textarea>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px;align-items:center">
        <button type="submit" aria-label="Send request">Send request</button>
        <div id="formNote" class="muted" style="font-size:13px">Sends to Google Sheet (configured).</div>
      </div>
    </form>
  </section>

  <div class="footer">© <span id="year"></span> Prathi Tech — Built for students</div>
</main>

<!-- toast -->
<div id="toast" style="display:none;position:fixed;right:18px;bottom:18px;background:rgba(0,0,0,0.7);color:#fff;padding:10px 12px;border-radius:10px;z-index:150">Saved</div>

<!-- ---------- DATA ---------- -->
<script>
/* Small curated dataset embedded for instant load.
   You can later move this to tools.json or a DB for 100k+ items.
   Keep objects small: title, desc, url, tags.
*/
const DATA = {
  tools: [
    {"title":"GitHub Student Developer Pack","desc":"100+ free tools for verified students including domains, credits and developer tools.","url":"https://education.github.com/pack","tags":["students","dev"]},
    {"title":"GitHub Pages","desc":"Free static hosting with custom domain support.","url":"https://pages.github.com","tags":["hosting","students"]},
    {"title":"Netlify","desc":"Fast static site hosting with CI/CD and free tier.","url":"https://www.netlify.com","tags":["hosting","cloud"]},
    {"title":"Vercel","desc":"Easy deploy for static and Next.js apps with serverless functions.","url":"https://vercel.com","tags":["hosting","cloud"]},
    {"title":"Cloudflare Pages","desc":"Jamstack hosting on Cloudflare's global network.","url":"https://pages.cloudflare.com","tags":["hosting","cloud"]},
    {"title":"Namecheap (domains)","desc":"Affordable domains and student deals sometimes via partners.","url":"https://www.namecheap.com","tags":["domain"]},
    {"title":"Figma Education","desc":"Free Figma Pro features for students and educators.","url":"https://www.figma.com/education","tags":["design","students"]},
    {"title":"Photopea","desc":"Powerful browser-based Photoshop alternative (free).","url":"https://www.photopea.com","tags":["design","image"]},
    {"title":"Canva for Education","desc":"Canva Pro features for classrooms and students.","url":"https://www.canva.com/education","tags":["design","students"]},
    {"title":"Google Colab","desc":"Free Jupyter notebooks with optional GPU for ML experiments.","url":"https://colab.research.google.com","tags":["ml","ai"]},
    {"title":"Kaggle","desc":"Datasets, notebooks and machine learning competitions.","url":"https://www.kaggle.com","tags":["ml","data"]},
    {"title":"Replit","desc":"Online IDE, collaborative and quick hosting for prototypes.","url":"https://replit.com","tags":["dev","hosting"]},
    {"title":"Glitch","desc":"Instant remixable Node apps for prototypes and demos.","url":"https://glitch.com","tags":["dev","hosting"]},
    {"title":"Photopea Templates","desc":"PSD & template resources usable in Photopea.","url":"https://www.photopea.com","tags":["design","resources"]},
    {"title":"Unsplash","desc":"High-quality free photos for projects.","url":"https://unsplash.com","tags":["media","images"]},
    {"title":"Pexels","desc":"Free stock photos and videos.","url":"https://www.pexels.com","tags":["media","images"]},
    {"title":"TinyPNG","desc":"Compress PNG/JPG to reduce web image sizes.","url":"https://tinypng.com","tags":["tools","performance"]},
    {"title":"OBS Studio","desc":"Open-source screen recording and streaming software.","url":"https://obsproject.com","tags":["media","streaming"]},
    {"title":"Kapwing","desc":"Browser video editor and collaboration tools.","url":"https://www.kapwing.com","tags":["media","video"]},
    {"title":"Audacity","desc":"Free audio editor for podcasts & clips.","url":"https://www.audacityteam.org","tags":["media","audio"]},
    {"title":"Blender","desc":"Open-source 3D modeling, rendering and animation suite.","url":"https://www.blender.org","tags":["media","3d"]},
    {"title":"FreeCodeCamp","desc":"Project-based web dev curriculum, free certifications.","url":"https://www.freecodecamp.org","tags":["learning","coding"]},
    {"title":"MDN Web Docs","desc":"Authoritative documentation for web developers.","url":"https://developer.mozilla.org","tags":["learning","web"]},
    {"title":"CS50","desc":"Harvard's intro to CS course (free materials).","url":"https://cs50.harvard.edu","tags":["learning","course"]},
    {"title":"Project Euler","desc":"Math & programming challenges to sharpen problem solving.","url":"https://projecteuler.net","tags":["coding","math"]}
  ],
  packs: [
    {"title":"GitHub Student Pack","desc":"Claim freebies & domains with student verification.","url":"https://education.github.com/pack"},
    {"title":"JetBrains Student","desc":"Free JetBrains IDE licenses for students.","url":"https://www.jetbrains.com/community/education/"},
    {"title":"Azure for Students","desc":"Azure credits for verified students.","url":"https://azure.microsoft.com/en-us/free/students/"}
  ],
  learning: [
    {"title":"freeCodeCamp","desc":"Project-based lessons and certifications.","url":"https://www.freecodecamp.org"},
    {"title":"MDN Web Docs","desc":"Web standards and practical examples.","url":"https://developer.mozilla.org"},
    {"title":"MIT OpenCourseWare","desc":"University course materials for self-study.","url":"https://ocw.mit.edu"}
  ]
};
</script>

<!-- ---------- APP LOGIC ---------- -->
<script>
/* ---------- helpers ---------- */
function $(q, ctx=document){ return ctx.querySelector(q) }
function $$(q, ctx=document){ return Array.from((ctx||document).querySelectorAll(q)) }
function toast(msg, ok=true){
  const t = document.getElementById('toast');
  t.textContent = msg; t.style.display='block';
  t.style.background = ok ? 'linear-gradient(90deg,#06d6a0,#00b3ff)' : 'linear-gradient(90deg,#ff6b6b,#d64545)';
  clearTimeout(t._hid); t._hid = setTimeout(()=> t.style.display='none', 2600);
}

/* ---------- icons ---------- */
document.addEventListener('DOMContentLoaded', ()=> {
  try{ feather.replace({ 'stroke-width': 1.6, width:16, height:16 }) }catch(e){}
});

/* ---------- routing & nav ---------- */
const menuToggle = $('#menuToggle'), mobileMenu = $('#mobileMenu');
if(menuToggle){
  menuToggle.addEventListener('click', ()=>{
    const open = mobileMenu.style.display === 'block';
    mobileMenu.style.display = open ? 'none' : 'block';
    mobileMenu.setAttribute('aria-hidden', open ? 'true' : 'false');
    // swap icon
    menuToggle.innerHTML = open ? feather.icons['menu'].toSvg() : feather.icons['x'].toSvg();
  });
}
// delegate nav clicks
document.addEventListener('click', (e)=>{
  const a = e.target.closest('[data-route]');
  if(!a) return;
  e.preventDefault();
  const route = a.getAttribute('data-route');
  navigateTo(route);
  if(mobileMenu.style.display==='block'){ mobileMenu.style.display='none'; menuToggle.innerHTML = feather.icons['menu'].toSvg(); }
});
$$('.menu-desktop .btn-ghost').forEach(b=> b.addEventListener('click', ()=> navigateTo(b.getAttribute('data-route')) ));

function navigateTo(name){
  const sections = $$('main section');
  sections.forEach(s=> s.style.display = (s.id===name ? '' : 'none'));
  $$('#mobileMenu a').forEach(a=> a.classList.toggle('active', a.getAttribute('data-route')===name));
  $$('.menu-desktop .btn-ghost').forEach(b=> b.classList.toggle('active', b.getAttribute('data-route')===name));
  // boot pages
  if(name==='tools') bootTools();
  if(name==='packs') bootGrid('packs', DATA.packs, '#packsGrid');
  if(name==='learning') bootGrid('learning', DATA.learning, '#learnGrid');
  history.replaceState(null,'', '#'+name);
  window.scrollTo({top:0,behavior:'smooth'});
}

/* initial route */
document.addEventListener('DOMContentLoaded', ()=>{
  const start = location.hash ? location.hash.replace('#','') : 'home';
  navigateTo(start);
  $('#year').textContent = new Date().getFullYear();
});

/* keyboard helpers */
document.addEventListener('keydown', (e)=>{
  if(e.key==='/' && document.activeElement.tagName!=='INPUT' && document.activeElement.tagName!=='TEXTAREA'){
    e.preventDefault();
    navigateTo('tools'); const s=$('#search'); if(s){ s.focus(); s.select(); }
  }
  if(e.key.toLowerCase()==='h'){ alert('Help:\\n- Press / to focus search\\n- Use menu to switch pages\\n- Use Request form to add new tools.'); }
});

/* ---------- theme toggle ---------- */
const themeToggle = $('#themeToggle');
const savedTheme = localStorage.getItem('prathi_theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'dark');
document.documentElement.setAttribute('data-theme', savedTheme);
themeToggle.innerHTML = feather.icons[savedTheme==='dark'?'moon':'sun'].toSvg();
themeToggle.addEventListener('click', ()=>{
  const cur = document.documentElement.getAttribute('data-theme');
  const next = cur === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', next);
  localStorage.setItem('prathi_theme', next);
  themeToggle.innerHTML = feather.icons[next==='dark'?'moon':'sun'].toSvg();
});

/* ---------- animated background (starfield, optimized) ---------- */
(function starfield(){
  const c = document.getElementById('bg'); if(!c) return;
  const ctx = c.getContext('2d');
  let W = c.width = innerWidth, H = c.height = innerHeight;
  window.addEventListener('resize', ()=>{ W=c.width=innerWidth; H=c.height=innerHeight; init(); });
  let pts = [];
  function init(){
    pts = []; const N = Math.min(260, Math.round(W*H/9000));
    for(let i=0;i<N;i++) pts.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.6+0.2,vx:(Math.random()-0.5)*0.22,vy:(Math.random()-0.5)*0.1,a:Math.random()*0.6+0.03});
  }
  function frame(){
    ctx.clearRect(0,0,W,H);
    const g = ctx.createLinearGradient(0,0,W,H);
    g.addColorStop(0,'rgba(123,97,255,0.02)'); g.addColorStop(1,'rgba(0,230,168,0.01)');
    ctx.fillStyle = g; ctx.fillRect(0,0,W,H);
    for(const p of pts){
      p.x += p.vx; p.y += p.vy;
      if(p.x < -10) p.x = W+10; if(p.x > W+10) p.x = -10;
      if(p.y < -10) p.y = H+10; if(p.y > H+10) p.y = -10;
      ctx.beginPath(); ctx.fillStyle = `rgba(255,255,255,${p.a})`; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(frame);
  }
  init(); frame();
})();

/* ---------- reveal on scroll ---------- */
(function reveal(){
  const io = new IntersectionObserver(entries => { entries.forEach(en => { if(en.isIntersecting) en.target.classList.add('show'); }); }, {threshold:0.12});
  document.querySelectorAll('.reveal').forEach(el => io.observe(el));
})();

/* ---------- Tools - search, filter, pagination (client side) ---------- */
let toolsAll = DATA.tools.slice(); // copy
const PAGE_SIZE = 12;
let currentPage = 1;

function bootTools(){
  if($('#cards').dataset.inited) return;
  $('#cards').dataset.inited = '1';
  const searchEl = $('#search'), catEl = $('#cat'), tagWrap = $('#tagWrap'), cards = $('#cards'), pager = $('#pager'), itemsCount = $('#itemsCount');

  function getTags(){
    const s = new Set(['all']);
    toolsAll.forEach(it => (it.tags||[]).forEach(t => s.add(t)));
    return Array.from(s);
  }
  function drawTags(active='all'){
    const tags = getTags();
    tagWrap.innerHTML = tags.map(t => `<div class="tag ${t===active?'active':''}" data-tag="${t}">${t}</div>`).join('');
    tagWrap.querySelectorAll('.tag').forEach(btn => btn.addEventListener('click', ()=>{
      tagWrap.querySelectorAll('.tag').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active'); currentPage = 1; render();
    }));
  }

  function render(){
    const q = (searchEl.value||'').trim().toLowerCase();
    const cat = catEl.value || 'all';
    const activeTag = (tagWrap.querySelector('.tag.active') || {dataset:{tag:'all'}}).dataset.tag || 'all';
    let res = toolsAll.filter(it=>{
      if(cat !== 'all' && !(it.tags||[]).includes(cat)) return false;
      if(activeTag !== 'all' && !(it.tags||[]).includes(activeTag)) return false;
      if(!q) return true;
      const txt = (it.title + ' ' + (it.desc||' ') + ' ' + (it.tags||[]).join(' ')).toLowerCase();
      return txt.includes(q);
    });

    itemsCount.textContent = res.length.toLocaleString();

    const pages = Math.max(1, Math.ceil(res.length / PAGE_SIZE));
    if(currentPage > pages) currentPage = 1;
    const start = (currentPage-1)*PAGE_SIZE; const pageItems = res.slice(start, start+PAGE_SIZE);

    cards.innerHTML = pageItems.map(it => `
      <article class="card reveal" role="article" aria-label="${escapeHtml(it.title)}">
        <div style="display:flex;justify-content:space-between;gap:12px;align-items:flex-start">
          <div style="flex:1">
            <h3>${escapeHtml(it.title)}</h3>
            <p>${escapeHtml(it.desc||'')}</p>
          </div>
          <div style="text-align:right;min-width:120px">
            ${(it.tags||[]).slice(0,3).map(t=>`<div class="tag" style="margin-bottom:6px">${escapeHtml(t)}</div>`).join('')}
            <div class="actions" style="margin-top:8px;">
              <a class="open" target="_blank" rel="noopener noreferrer" href="${it.url}">Open</a>
              <a class="more" target="_blank" rel="noopener noreferrer" href="${it.url}" title="More">Visit</a>
            </div>
          </div>
        </div>
      </article>
    `).join('');

    // pager
    pager.innerHTML = Array.from({length:pages}).map((_,i)=>`<button class="${i+1===currentPage?'active':''}" data-page="${i+1}">${i+1}</button>`).join('');
    pager.querySelectorAll('button').forEach(b=>b.addEventListener('click', ()=>{ currentPage = +b.dataset.page; render(); window.scrollTo({top:document.getElementById('cards').offsetTop-80,behavior:'smooth'}); }));
    // reveal
    document.querySelectorAll('.reveal').forEach(el=> el.classList.add('show'));
  }

  searchEl.addEventListener('input', ()=>{ currentPage = 1; render(); });
  catEl.addEventListener('change', ()=>{ currentPage = 1; render(); });

  drawTags(); render();
}

/* ---------- generic grid bootstrap ---------- */
function bootGrid(name,dataArray,mountSel){
  const mount = document.querySelector(mountSel);
  if(!mount) return;
  if(mount.dataset.inited) return;
  mount.dataset.inited = '1';
  mount.innerHTML = dataArray.map(it=>`
    <article class="card reveal">
      <h3>${escapeHtml(it.title)}</h3>
      <p>${escapeHtml(it.desc||'')}</p>
      <div style="margin-top:10px"><a class="open" target="_blank" rel="noopener noreferrer" href="${it.url}">Open</a></div>
    </article>
  `).join('');
  document.querySelectorAll('.reveal').forEach(el=> el.classList.add('show'));
}

/* ---------- contact form (Apps Script) ---------- */
/* YOUR deployed Apps Script Web App URL (from earlier) */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbz6EoW4rw_tzmz6Ihnl6ymDJ0mzHDik8a6R5KMINMYP9yMJEi4PgjUuPtNgRNLu460/exec";

$('#contactForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const f = e.target;
  const payload = {
    name: f.name.value.trim(),
    email: f.email.value.trim(),
    tool: f.tool.value.trim(),
    message: f.message ? f.message.value.trim() : ''
  };
  if(!payload.name || !payload.tool){ toast('Please include name and tool', false); return; }
  try{
    // Using JSON POST (Apps Script doPost expects JSON as earlier)
    const res = await fetch(WEB_APP_URL, { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify(payload) });
    const jr = await res.json().catch(()=>({}));
    toast('Request sent ✅'); f.reset();
  }catch(err){
    console.error(err);
    toast('Submit failed — check Apps Script URL', false);
  }
});

/* ---------- small utilities ---------- */
function escapeHtml(s){ if(!s) return ''; return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;') }

/* ---------- accessibility: close mobile menu on outside click ---------- */
document.addEventListener('click', (e)=>{
  if(!e.target.closest('.mobile-menu') && !e.target.closest('#menuToggle') && mobileMenu.style.display==='block'){
    mobileMenu.style.display='none';
    menuToggle.innerHTML = feather.icons['menu'].toSvg();
  }
});
</script>

</body>
</html>
